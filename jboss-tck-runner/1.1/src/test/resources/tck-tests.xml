<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" >
<!-- CDI TCK TestNG configuration for Weld -->
<suite name="Weld / JBoss AS run of CDI TCK" verbose="0" configfailurepolicy="continue">
    
    <listeners>
        <listener class-name="org.jboss.weld.tck.SingleTestMethodInterceptor"/>
    </listeners>
    
    <test name="CDI TCK">

        <packages>
            <package name="org.jboss.cdi.tck.tests.*" />
            <package name="org.jboss.cdi.tck.interceptors.tests.*" />
        </packages>
        
        <classes>

            <!-- Issues in the TCK -->
            <class name="org.jboss.cdi.tck.tests.context.DestroyForSameCreationalContext2Test">
                <methods>
                    <exclude name="testDestroyForSameCreationalContextOnly" />
                </methods>
            </class>
            <!-- CDITCK-270 -->
            <class name="org.jboss.cdi.tck.tests.event.observer.transactional.TransactionalObserverTest">
                <methods>
                    <exclude name="testSucessfullTransaction" />
                </methods>
            </class>
            
            <!-- TCK tests no longer valid for CDI 1.1 -->
            <!-- CDI-206 -->
            <class name="org.jboss.cdi.tck.tests.context.conversation.ClientConversationContextTest">
                <methods>
                    <exclude name="testNonexistentConversationExceptionThrown" />
                </methods>
            </class>
            <!-- CDI-83 -->
            <class name="org.jboss.cdi.tck.tests.extensions.beanManager.BeanManagerTest">
                <methods>
                    <exclude name="testObtainingWrappedAnnotatedType" />
                </methods>
            </class>

            <!-- Issues in Weld (the RI) -->
            <!-- WELD-458 -->
            <class name="org.jboss.cdi.tck.tests.interceptors.definition.broken.interceptorForLifecycleTargetMethod.InterceptorForLifecycleTargetMethodTest">
                <methods>
                    <exclude name="testInterceptorForLifecycleTargetMethod" />
                </methods>
            </class>
            <!-- WELD-430 -->
            <class name="org.jboss.cdi.tck.tests.decorators.invocation.DecoratorInvocationTest">
                <methods>
                    <exclude name="testDecoratorInvokesDelegateMethodOutsideOfBusinessMethodInterception" />
                </methods>
            </class>
            <!-- WELD-1039 -->
            <class name="org.jboss.cdi.tck.tests.extensions.annotated.AlternativeMetaDataTest">
                <methods>
                    <exclude name="testGetAnnotations" />
                </methods>
            </class>
            <!-- WELD-1038 -->
            <class name="org.jboss.cdi.tck.tests.interceptors.definition.enterprise.jms.MessageDrivenBeanInterceptorInvocationTest">
                <methods>
                    <exclude name="testMessageDrivenBeanMethodIntercepted" />
                </methods>
            </class>
            <!-- WELD-1035 -->
            <class name="org.jboss.cdi.tck.tests.extensions.container.event.jms.ContainerEventTest">
                <methods>
                    <exclude name="testProcessInjectionTargetEventFiredForMessageDrivenBean" />
                </methods>
            </class>
            <!-- WELD-1051 -->
            <class name="org.jboss.cdi.tck.tests.lookup.injectionpoint.broken.not.bean.InjectionPointTest">
                <methods>
                    <exclude name="testDefinitionErrorDetected"></exclude>
                </methods>
            </class>
            <!-- WELD-1052 -->
            <class name="org.jboss.cdi.tck.tests.context.passivating.broken.nonPassivationCapableProducerField.NonPassivationCapableProducerFieldTest">
                <methods>
                    <exclude name="testNonPassivationCapableProducerFieldNotOk"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.context.passivating.broken.nonPassivationCapableProducerMethod.NonPassivationCapableProducerMethodTest">
                <methods>
                    <exclude name="testNonPassivationCapableProducerMethodNotOk"/>
                </methods>
            </class>
            <!-- WELD-1042 -->
            <class name="org.jboss.cdi.tck.tests.context.application.event.ApplicationScopeEventMultiWarTest">
                <methods>
                    <exclude name="testDeployment"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.lookup.injection.parameterized.ParameterizedTypesInjectionToRawTypeTest">
                <methods>
                    <exclude name="testInjection"/>
                </methods>
            </class>
            <!-- WELD-1060 -->
<!--             <class name="org.jboss.cdi.tck.tests.lookup.typesafe.resolution.parameterized.AssignabilityOfRawAndParameterizedTypesTest"> -->
<!--                 <methods> -->
<!--                     <exclude name="testAssignabilityOfParameterizedTypeWithTypeVariablesToParameterizedTypeTypeVariable"/> -->
<!--                 </methods> -->
<!--             </class> -->
<!--             <class name="org.jboss.cdi.tck.tests.lookup.injection.parameterized.ParameterizedTypesInjectionToParameterizedWithTypeVariableTest"> -->
<!--                 <methods> -->
<!--                     <exclude name="testInjection"/> -->
<!--                 </methods> -->
<!--             </class> -->
            <!-- WELD-1073 -->
             <class name="org.jboss.cdi.tck.tests.deployment.packaging.interceptor.InterceptorClassNotInBeanArchiveTest">
                <methods>
                    <exclude name="testInterceptor"/>
                </methods>
            </class>
            <!-- WELD-1089 -->
            <class name="org.jboss.cdi.tck.tests.implementation.simple.resource.broken.type.ResourceDefinitionWithDifferentTypeTest">
                <methods>
                    <exclude name="testDeployment"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.implementation.simple.resource.broken.type.ejb.ResourceDefinitionWithDifferentTypeTest">
                <methods>
                    <exclude name="testDeployment"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.implementation.simple.resource.broken.type.env.ResourceDefinitionWithDifferentTypeTest">
                <methods>
                    <exclude name="testDeployment"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.implementation.simple.resource.broken.type.ws.ResourceDefinitionWithDifferentTypeTest">
                <methods>
                    <exclude name="testDeployment"/>
                </methods>
            </class>
            <!-- WELD-1045 -->
            <class name="org.jboss.cdi.tck.tests.extensions.lifecycle.processBeanAttributes.interceptor.InterceptorProcessBeanAttributesTest">
                <methods>
                    <exclude name="testBravoInterceptorObserved"/>
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.extensions.lifecycle.processBeanAttributes.decorator.DecoratorProcessBeanAttributesTest">
                <methods>
                    <exclude name="testBravoDecoratorObserved"/>
                </methods>
            </class>
            <!-- WELD-1110 -->
            <class name="org.jboss.cdi.tck.tests.decorators.invocation.enterprise.EnterpriseDecoratorInvocationTest">
                <methods>
                    <exclude name=".*"/>
                </methods>
            </class>
            <!-- WELD-1052 -->
            <class name="org.jboss.cdi.tck.tests.implementation.simple.lifecycle.unproxyable.UnproxyableManagedBeanTest">
                <methods>
                    <exclude name="testNormalScopedUnproxyableBeanResolution" />
                </methods>
            </class>
            <!-- WELD-1148 -->
            <class name="org.jboss.cdi.tck.tests.event.observer.transactional.custom.CustomTransactionalObserverTest">
                <methods>
                    <exclude name="testCustomTransactionalObserver" />
                </methods>
            </class>
            
            <!-- Issues in JBoss AS -->
            <!-- AS7-3107 -->
            <class name="org.jboss.cdi.tck.tests.context.jms.MessageListenerContextTest">
                <methods>
                    <exclude name=".*" />
                </methods>
            </class>
             <!-- AS7-4232 -->
            <class name="org.jboss.cdi.tck.tests.context.application.async.ApplicationContextAsyncListenerTest">
                <methods>
                    <exclude name="testApplicationContextActiveOnError" />
                </methods>
            </class>
            <class name="org.jboss.cdi.tck.tests.context.request.async.RequestContextAsyncListenerTest">
                <methods>
                    <exclude name="testRequestContextActiveOnError" />
                </methods>
            </class>

            <!-- JBAS-8306 -->
            <class name="org.jboss.cdi.tck.tests.context.request.ejb.EJBRequestContextTest">
                <methods>
                    <exclude name="testRequestScopeActiveDuringCallToEjbTimeoutMethod" />
                    <exclude name="testRequestScopeDestroyedAfterCallToEjbTimeoutMethod" />
                </methods>
            </class>
        </classes>
    </test>

</suite>
